<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Locate Badges Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        pre {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Locate Badges Functionality Test</h1>
    
    <div class="test-section info">
        <h3>Test Status</h3>
        <p>This page tests the Locate Badges functionality to ensure it works properly.</p>
    </div>

    <div class="test-section">
        <h3>Mock Authentication Setup</h3>
        <button onclick="setupMockAuth()">Setup Mock Authentication</button>
        <button onclick="clearMockAuth()">Clear Mock Authentication</button>
        <div id="auth-status"></div>
    </div>

    <div class="test-section">
        <h3>Mock Events Data</h3>
        <button onclick="testEventsData()">Test Events Loading</button>
        <div id="events-result"></div>
    </div>

    <div class="test-section">
        <h3>Mock Badge Data</h3>
        <button onclick="testBadgeData()">Test Badge Data Loading</button>
        <div id="badge-result"></div>
    </div>

    <div class="test-section">
        <h3>CSV Upload Test</h3>
        <button onclick="testCsvUpload()">Test CSV Upload Simulation</button>
        <div id="csv-result"></div>
    </div>

    <script>
        function setupMockAuth() {
            localStorage.setItem('mock_auth', 'true');
            localStorage.setItem('jwt', 'test-jwt-token');
            document.getElementById('auth-status').innerHTML = 
                '<div class="success">Mock authentication enabled</div>';
        }

        function clearMockAuth() {
            localStorage.removeItem('mock_auth');
            localStorage.removeItem('jwt');
            document.getElementById('auth-status').innerHTML = 
                '<div class="error">Mock authentication cleared</div>';
        }

        function testEventsData() {
            const mockEvents = [
                {
                    id: 1,
                    name: 'Tech Conference 2024',
                    start_date: '2024-12-15T09:00:00Z',
                    end_date: '2024-12-15T17:00:00Z',
                    status: 'active',
                    organizer_id: 1
                },
                {
                    id: 2,
                    name: 'Business Summit 2024',
                    start_date: '2024-12-20T10:00:00Z',
                    end_date: '2024-12-20T18:00:00Z',
                    status: 'active',
                    organizer_id: 1
                }
            ];
            
            document.getElementById('events-result').innerHTML = 
                '<div class="success">Mock events loaded successfully</div>' +
                '<pre>' + JSON.stringify(mockEvents, null, 2) + '</pre>';
        }

        function testBadgeData() {
            const mockBadgeData = [
                {
                    name: 'John Doe',
                    badgeId: '12345',
                    registrationId: 'REG-001',
                    qrCode: 'QR12345',
                    badgeType: 'VIP',
                    guest_type: 'VIP',
                    zone: 'A',
                    section: '1',
                    tray: 'A1',
                    organization: 'Tech Corp',
                    email: 'john.doe@example.com',
                    notes: 'Speaker',
                    status: 'pre-printed',
                    collected: false,
                    printHistory: [
                        { status: 'pre-printed', timestamp: '2024-07-20 09:00', staff: 'Admin', note: 'Initial print' }
                    ]
                },
                {
                    name: 'Jane Smith',
                    badgeId: '12346',
                    registrationId: 'REG-002',
                    qrCode: 'QR12346',
                    badgeType: 'Attendee',
                    guest_type: 'Attendee',
                    zone: 'B',
                    section: '2',
                    tray: 'B2',
                    organization: 'Biz Group',
                    email: 'jane.smith@biz.com',
                    notes: '',
                    status: 'not printed',
                    collected: false,
                    printHistory: []
                }
            ];
            
            document.getElementById('badge-result').innerHTML = 
                '<div class="success">Mock badge data loaded successfully</div>' +
                '<pre>' + JSON.stringify(mockBadgeData, null, 2) + '</pre>';
        }

        function testCsvUpload() {
            const sampleCsv = `name,badgeId,registrationId,qrCode,badgeType,guest_type,zone,section,tray,organization,email,notes,status,collected
John Doe,12345,REG-001,QR12345,VIP,VIP,A,1,A1,Tech Corp,john.doe@example.com,Speaker,pre-printed,false
Jane Smith,12346,REG-002,QR12346,Attendee,Attendee,B,2,B2,Biz Group,jane.smith@biz.com,,not printed,false`;

            document.getElementById('csv-result').innerHTML = 
                '<div class="success">CSV upload simulation successful</div>' +
                '<h4>Sample CSV Content:</h4>' +
                '<pre>' + sampleCsv + '</pre>';
        }

        // Check initial auth status
        window.onload = function() {
            const isMockAuth = localStorage.getItem('mock_auth') === 'true';
            document.getElementById('auth-status').innerHTML = 
                isMockAuth ? 
                '<div class="success">Mock authentication is enabled</div>' :
                '<div class="error">Mock authentication is disabled</div>';
        };
    </script>
</body>
</html>
